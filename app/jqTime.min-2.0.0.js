// Plugin jqTime. Printing current time in selector.
// Aunthor: Ivanushkin Nikolay (Nim579). Sorced 29.04.2011
// Promo: http://nim579.ru/promo/jqtime/
// Documentation: http://nim579.ru/html/jqtime/
// Version: 2.0.0 (Sun Apr 07 2013 13:20:34)
(function(){$.jqTimeProc={returnString:function(e,t,n,r,i){var s,o;return o="",s=[],e=e.toLowerCase(),e.indexOf("h")>=0&&(s[e.indexOf("h")]=n),e.indexOf("m")>=0&&(s[e.indexOf("m")]=r),e.indexOf("s")>=0&&(s[e.indexOf("s")]=i),o=s.join(t),o},formater:function(e){return e!=null?(String(e).length>0&&Number(e<=9)&&(e="0"+Number(e)),String(e)):null},updater:function(e,t){var n;return e%300===0&&(n=new Date,e=3600*n.getHours()+60*n.getMinutes()+n.getSeconds(),t!=="real"&&(e+=n.getTimezoneOffset()*60+t*3600)),e},stingToTime:function(e){var t,n,r,i,s;if(e!=null){e=e.split(":"),n=0,r=2;for(i=0,s=e.length;i<s;i++)t=e[i],n+=Number(t)*Math.pow(60,r),r--;return n}return null},expToTime:function(e){return e=e.replace(/([h]+)/g,hou),e=e.replace(/([H]+)/g,this.formater(hou)),e=e.replace(/([m]+)/g,min),e=e.replace(/([M]+)/g,this.formater(min)),e=e.replace(/([s]+)/g,sec),e=e.replace(/([S]+)/g,this.formater(sec)),e}}}).call(this),function(){$.fn.curTime=function(options){var elements,i,today,_this=this;return options=$.extend({sepor:":",wrap:!1,format:!0,utc:"real",template:"hms",exp:null},options),elements=$(this),today=new Date,i=3600*today.getHours()+60*today.getMinutes()+today.getSeconds(),options.utc!=="real"&&(i+=eval(today.getTimezoneOffset()*60+options.utc*3600)),setInterval(function(){var e,t,n,r,s;return i++,i%=86400,s=i,s<0&&(s=86400+s),options.warp&&(s=86400-s),e=Math.floor(s/3600),t=Math.floor((s-e*3600)/60),r=Math.floor(s-e*3600-t*60),options.format&&(e=$.jqTimeProc.formater(e),t=$.jqTimeProc.formater(t),r=$.jqTimeProc.formater(r)),options.exp!=null?n=$.jqTimeProc.expToTime(options.exp):n=$.jqTimeProc.returnString(options.template,options.sepor,e,t,r),elements.text(n),i=$.jqTimeProc.updater(i,options.utc)},1e3)},$.fn.intervalTimer=function(options){var c,elements,i,iFrom,iTo,today,_this=this;return options=jQuery.extend({sepor:":",wrap:!0,format:!0,utc:"real",template:"hms",exp:"",timeFrom:"",timeTo:"",alt:""},options),elements=$(this),today=new Date,i=3600*today.getHours()+60*today.getMinutes()+today.getSeconds(),options.utc!=="real"&&(i+=eval(today.getTimezoneOffset()*60+options.utc*3600)),iFrom=$.jqTimeProc.stingToTime(options.timeFrom),iTo=$.jqTimeProc.stingToTime(options.timeTo),c=i,setInterval(function(){var e,t,n,r,s;return i++,i%=86400,options.wrap?iFrom<=iTo?i>=iFrom&&i<=iTo?e=iTo-i:e=-1:i>=iFrom&&i<=86400||i>=0&&i<=iTo?e=(86400+iTo-i)%86400:e=-1:iFrom>=iTo?i>=iFrom&&i<=86400||i<=iTo&&i>=0?e=i:e=-1:(i=iFrom&&i<=iTo)?e=i:e=-1,e+1?(t=Math.floor(e/3600),n=Math.floor((e-t*3600)/60),s=Math.floor(e-t*3600-n*60),options.format&&(t=jqTimeProc.formater(t),n=jqTimeProc.formater(n),s=jqTimeProc.formater(s)),options.exp!=null?r=$.jqTimeProc.expToTime(options.exp):r=$.jqTimeProc.returnString(options.template,options.sepor,t,n,s),elements.text(r)):elements.html(options.alt),i=$.jqTimeProc.updater(i,options.utc)},1e3)},$.fn.timeToggler=function(options){var doToggle,elements,i,iFrom,iTo,o_ev,startContent,today,_this=this;return options=$.extend({timeFrom:"",timeTo:"",inInterval:null,outInterval:null,utc:"real"},options),elements=$(this),startContent=$(this).html(),today=new Date,i=3600*today.getHours()+60*today.getMinutes()+today.getSeconds(),options.utc!=="real"&&(i+=eval(today.getTimezoneOffset()*60+options.utc*3600)),iFrom=jqTimeProc.sting_to_time(options.timeFrom),iTo=jqTimeProc.sting_to_time(options.timeTo),o_ev=null,doToggle=function(e){if(e!==o_ev)return e?($(document).trigger("inInterval.jqTime"),options.inInterval!=null?(typeof options.inInterval=="Function"&&options.inInterval(),elements.html(options.inInterval)):elements.html(startContent).show()):($(document).trigger("outInterval.jqTime"),options.inInterval!=null?typeof options.outInterval=="Function"?options.outInterval():elements.html(options.outInterval):elements.hide()),o_ev=e},setInterval(function(){var e;return i++,iFrom<=iTo?e=i>=iFrom&&i<iTo:e=i>=iFrom&&i<=86400||i>=0&&i<iTo,doToggle(e),i=jqTimeProc.updater(i,options.utc)},1e3)}}.call(this);