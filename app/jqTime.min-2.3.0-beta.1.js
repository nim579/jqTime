// Plugin jqTime. jqTime - this is a jQuery plugin that displays the time on the screen. The plugin contains many flexible settings.
// Aunthor: Nick Iv (Nim579). Sorced 29.04.2011
// Promo: http://dev.nim579.ru/jqTime/
// Documentation: http://dev.nim579.ru/jqTime/docs/
// Version: 2.3.0-beta.1 (Wed Jun 12 2013 14:19:44)
(function(){$.jqTime={},$.fn.jqTime=function(e,t,n){var r;t=$.extend({sepor:":",wrap:!1,format:!0,hour12:!1,utc:"real",template:"hms",exp:null,timeFrom:"",timeTo:"",alt:null,inInterval:null,outInterval:null,pm:"p.m.",am:"a.m."},t),r=this,t.today=new Date,t.i=3600*t.today.getHours()+60*t.today.getMinutes()+t.today.getSeconds(),t.utc!=="real"&&(t.i+=t.today.getTimezoneOffset()*60+t.utc*3600),t.iFrom=$.jqTime.helper.stingToTime(t.timeFrom),t.iTo=$.jqTime.helper.stingToTime(t.timeTo);if($.jqTime.modes[e]!=null)return this.each(function(i,s){var o,u=this;return o=$(this),e==="clear"?$.jqTime.modes[e].call(r,this):(this.jqTimeCurr=t.i,this.jqTimeToggle=null,this.oldHtml=$(this).html(),this.jqTimeTimer!=null&&clearInterval(this.jqTimeTimer),this.jqTimeTimer=setInterval(function(){var i;i=$.jqTime.modes[e].call(r,u,t);if(n!=null&&typeof n=="Function")return n(i)},1e3))})}}).call(this),function(){$.jqTime==null&&($.jqTime={}),$.jqTime.modes==null&&($.jqTime.modes={}),$.jqTime.modes.clear=function(e){e.jqTimeTimer!=null&&(clearInterval(e.jqTimeTimer),delete e.jqTimeTimer),e.jqTimeCurr!=null&&delete e.jqTimeCurr,e.jqTimeToggle!=null&&delete e.jqTimeToggle;if(e.oldHtml!=null)return $(e).html(e.oldHtml),delete e.oldHtml}}.call(this),function(){$.jqTime==null&&($.jqTime={}),$.jqTime.modes==null&&($.jqTime.modes={}),$.jqTime.modes.current=function(e,t){var n,r,i,s,o,u,a;return u={hours:0,minutes:0,seconds:0,utc:t.utc,formated:""},r=e.jqTimeCurr,r++,r%=86400,a=r,a<0&&(a=86400+a),t.wrap&&(a=86400-a),u.hours=Math.floor(a/3600),u.minutes=Math.floor((a-u.hours*3600)/60),u.seconds=Math.floor(a-u.hours*3600-u.minutes*60),t.hour12&&(i=Math.floor(u.hours/13),u.hours-=12*i,u.midday=i?"pm":"am"),t.format&&(n=$.jqTime.helper.formater(u.hours),s=$.jqTime.helper.formater(u.minutes),o=$.jqTime.helper.formater(u.seconds)),t.exp!=null?u.formated=$.jqTime.helper.expToTime(t.exp,n,s,o,u.midday!=null?{now:u.midday,pm:t.pm,am:t.am}:void 0):u.formated=$.jqTime.helper.returnString(t.template,t.sepor,n,s,o),$(e).html(u.formated),e.jqTimeCurr=r,r=$.jqTime.helper.updater(r,t.utc),u}}.call(this),function(){$.jqTime==null&&($.jqTime={}),$.jqTime.helper={returnString:function(e,t,n,r,i){var s,o,u,a,f;e==null&&(e="hms"),t==null&&(t=":"),n==null&&(n="H"),r==null&&(r="M"),i==null&&(i="S"),typeof e!="string"&&(e="hms"),typeof t!="string"&&typeof t!="number"&&(t=":"),u=[],e=e.toLowerCase(),e.indexOf("h")>=0&&(u[e.indexOf("h")]=n),e.indexOf("m")>=0&&(u[e.indexOf("m")]=r),e.indexOf("s")>=0&&(u[e.indexOf("s")]=i),o=[];for(a=0,f=u.length;a<f;a++)s=u[a],(!!s||s===0)&&o.push(s);return o.join(t)},formater:function(e){return e!=null?(String(e).length>0&&Number(e<=9)&&(e="0"+Number(e)),String(e)):null},updater:function(e,t){var n;return e%300===0&&(n=new Date,e=3600*n.getHours()+60*n.getMinutes()+n.getSeconds(),t!=="real"&&(e+=n.getTimezoneOffset()*60+t*3600)),e},stingToTime:function(e){var t,n,r,i,s,o;if(e!=null){r=0;if(!e)return 0;if(typeof e=="number")return e;t=e.split(":"),t=t.slice(0,3),r=0;for(i=s=0,o=t.length;s<o;i=++s){n=t[i];if(Number(n===NaN))return NaN;r+=Math.floor(Number(n))*Math.pow(60,2-i)}return r}return null},expToTime:function(e,t,n,r,i){if(e&&typeof e=="string"){if(t!=null&&typeof t=="string"||typeof t=="number")e=e.replace(/([h]+)/g,t),e=e.replace(/([H]+)/g,this.formater(t));if(n!=null&&typeof n=="string"||typeof n=="number")e=e.replace(/([m]+)/g,n),e=e.replace(/([M]+)/g,this.formater(n));if(r!=null&&typeof r=="string"||typeof r=="number")e=e.replace(/([s]+)/g,r),e=e.replace(/([S]+)/g,this.formater(r));return i==null||i.now!=="am"&&i.now!=="pm"?(e=e.replace(/([d]+)/g,""),e=e.replace(/([D]+)/g,"")):(e=e.replace(/([d]+)/g,i[i.now]),e=e.replace(/([D]+)/g,i[i.now])),e}return null},filter:function(e,t,n){var r;return r=[],e==null?r:Array.prototype.filter&&e.filter===Array.prototype.filter?e.filter(t,n):(each(e,function(e,i,s){if(t.call(n,e,i,s))return r[r.length]=e}),r)}}}.call(this),function(){$.jqTime==null&&($.jqTime={}),$.jqTime.modes==null&&($.jqTime.modes={}),$.jqTime.modes.interval=function(e,t){var n,r,i,s,o,u,a;return a={utc:t.utc,formated:"",inInterval:!1},i=e.jqTimeCurr,i++,i%=86400,t.wrap?t.iFrom<=t.iTo?i>=t.iFrom&&i<=t.iTo?n=t.iTo-i:n=!1:i>=t.iFrom&&i<=86400||i>=0&&i<=t.iTo?n=(86400+t.iTo-i)%86400:n=!1:t.iFrom>=t.iTo?i>=t.iFrom&&i<=86400||i<=t.iTo&&i>=0?n=i:n=!1:i>=t.iFrom&&i<=t.iTo?n=i:n=!1,n!==!1?(a.inInterval=!0,a.hours=Math.floor(n/3600),a.minutes=Math.floor((n-a.hours*3600)/60),a.seconds=Math.floor(n-a.hours*3600-a.minutes*60),t.hour12&&(s=Math.floor(a.hours/13),a.hours-=12*s,a.midday=s?"pm":"am"),t.format&&(r=$.jqTime.helper.formater(a.hours),o=$.jqTime.helper.formater(a.minutes),u=$.jqTime.helper.formater(a.seconds)),t.exp!=null?a.formated=$.jqTime.helper.expToTime(t.exp,r,o,u,a.midday!=null?{now:a.midday,pm:t.pm,am:t.am}:void 0):a.formated=$.jqTime.helper.returnString(t.template,t.sepor,r,o,u),$(e).html(a.formated)):(a.inInterval=!1,t.alt!=null?($(e).html(t.alt),a.formated=t.alt):($(e).html(e.oldHtml),a.formated=e.oldHtml)),e.jqTimeCurr=i,i=$.jqTime.helper.updater(i,t.utc),a}}.call(this),function(){$.jqTime==null&&($.jqTime={}),$.jqTime.modes==null&&($.jqTime.modes={}),$.jqTime.modes.multi=function(e,t){var n,r,i,s,o,u,a,f,l,c,h;o={utc:t.utc,formated:"",inInterval:!1},s=0,n=e.jqTimeCurr,n++;if(t.multi==null||t.multi.length===0)t.multi=[{after:"00:00",payload:"am"},{after:"13:00",payload:"pm"}];t.multi.length===1&&t.multi.push({after:$.jqTime.helper.stingToTime(t.multi[0].after)!==0?"00:00":"13:00",payload:$.jqTime.helper.stingToTime(t.multi[0].after)!==0?"am":"pm"}),t.multi=$.jqTime.helper.filter(t.multi,function(e){return!!e.after}),c=t.multi;for(r=u=0,f=c.length;u<f;r=++u)i=c[r],i.id="interval"+(r+1),i.after=$.jqTime.helper.stingToTime(i.after);t.multi.sort=t.multi.sort(function(e,t){if(e.after>t.after)return 1;if(e.after<t.after)return-1;if(e.after===t.after)return 0}),h=t.multi;for(r=a=0,l=h.length;a<l;r=++a)i=h[r],n>=i.after&&(s=r);return n<=t.multi[0].after&&(s=t.multi.length-1),o.inInterval=t.multi[s].id,e.jqTimeMulti!==o.inInterval&&(e.jqTimeMulti=o.inInterval,$(e).trigger(""+o.inInterval+".jqTime"),t.multi[s].payload?typeof t.multi[s].payload=="Function"?t.multi[s].payload():$(e).html(t.multi[s].payload).show():$(e).hide()),e.jqTimeCurr=n,n=$.jqTime.helper.updater(n,t.utc),o}}.call(this),function(){$.jqTime==null&&($.jqTime={}),$.jqTime.modes==null&&($.jqTime.modes={}),$.jqTime.modes.toggler=function(e,t){var n,r;return r={utc:t.utc,formated:"",inInterval:!1},n=e.jqTimeCurr,n++,t.iFrom<=t.iTo?r.inInterval=n>=t.iFrom&&n<t.iTo:r.inInterval=n>=t.iFrom&&n<=86400||n>=0&&n<t.iTo,r.inInterval!==e.jqTimeToggle&&(r.inInterval?($(e).trigger("inInterval.jqTime"),t.inInterval!=null?typeof t.inInterval=="Function"?t.inInterval():$(e).html(t.inInterval):$(e).html(e.oldHtml).show()):($(e).trigger("outInterval.jqTime"),t.inInterval!=null?typeof t.outInterval=="Function"?t.outInterval():$(e).html(t.outInterval):$(e).hide()),e.jqTimeToggle=r.inInterval),e.jqTimeCurr=n,n=$.jqTime.helper.updater(n,t.utc),r}}.call(this);